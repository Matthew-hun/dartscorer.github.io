"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{3589:(r,a,e)=>{e.d(a,{A:()=>l,MatchProvider:()=>n});var i=e(5155),t=e(2115);let d=(0,t.createContext)(void 0),n=r=>{let{children:a}=r,[e,n]=(0,t.useState)(null),[l,o]=(0,t.useState)(!1);return(0,i.jsx)(d.Provider,{value:{match:e,setMatch:n,isRunning:l,setIsRunning:o},children:a})};function l(){let r=(0,t.useContext)(d);if(!r)throw Error("useMatch must be used within a MatchProvider");let a=[{remainingScore:170,dart:{dart:["T20","T20","BIKE"]},isValid:!1},{remainingScore:169,dart:{dart:[]},isValid:!1},{remainingScore:168,dart:{dart:[]},isValid:!1},{remainingScore:167,dart:{dart:["T20","T19","BIKE"]},isValid:!1},{remainingScore:166,dart:{dart:[]},isValid:!1},{remainingScore:165,dart:{dart:[]},isValid:!1},{remainingScore:164,dart:{dart:["T20","T18","BIKE"]},isValid:!1},{remainingScore:163,dart:{dart:[]},isValid:!1},{remainingScore:162,dart:{dart:[]},isValid:!1},{remainingScore:161,dart:{dart:["T20","T17","BIKE"]},isValid:!1},{remainingScore:160,dart:{dart:["T20","T20","D20"]},isValid:!0},{remainingScore:159,dart:{dart:[]},isValid:!1},{remainingScore:158,dart:{dart:["T20","T20","D19"]},isValid:!0},{remainingScore:157,dart:{dart:["T20","T19","D20"]},isValid:!0},{remainingScore:156,dart:{dart:["T20","T20","D18"]},isValid:!0},{remainingScore:155,dart:{dart:["T20","T19","D19"]},isValid:!0},{remainingScore:154,dart:{dart:["T20","T18","D20"]},isValid:!0},{remainingScore:153,dart:{dart:["T20","T19","D18"]},isValid:!0},{remainingScore:152,dart:{dart:["T20","T20","D16"]},isValid:!0},{remainingScore:151,dart:{dart:["T20","T17","D20"]},isValid:!0},{remainingScore:150,dart:{dart:["T20","T18","D18"]},isValid:!0},{remainingScore:149,dart:{dart:["T20","T19","D16"]},isValid:!0},{remainingScore:148,dart:{dart:["T20","T16","D20"]},isValid:!0},{remainingScore:147,dart:{dart:["T20","T17","D18"]},isValid:!0},{remainingScore:146,dart:{dart:["T20","T18","D16"]},isValid:!0},{remainingScore:145,dart:{dart:["T20","T15","D20"]},isValid:!0},{remainingScore:144,dart:{dart:["T20","T20","D12"]},isValid:!0},{remainingScore:143,dart:{dart:["T20","T17","D16"]},isValid:!0},{remainingScore:142,dart:{dart:["T20","T14","D20"]},isValid:!0},{remainingScore:141,dart:{dart:["T20","T19","D12"]},isValid:!0},{remainingScore:140,dart:{dart:["T20","T16","D16"]},isValid:!0},{remainingScore:139,dart:{dart:["T19","T14","D20"]},isValid:!0},{remainingScore:138,dart:{dart:["T20","T18","D12"]},isValid:!0},{remainingScore:137,dart:{dart:["T19","T16","D16"]},isValid:!0},{remainingScore:136,dart:{dart:["T20","T20","D8"]},isValid:!0},{remainingScore:135,dart:{dart:["T20","T17","D12"]},isValid:!0},{remainingScore:134,dart:{dart:["T20","T14","D16"]},isValid:!0},{remainingScore:133,dart:{dart:["T20","T19","D8"]},isValid:!0},{remainingScore:132,dart:{dart:["T20","T16","D12"]},isValid:!0},{remainingScore:131,dart:{dart:["T20","T13","D16"]},isValid:!0},{remainingScore:130,dart:{dart:["T20","T20","D5"]},isValid:!0},{remainingScore:129,dart:{dart:["T19","T16","D12"]},isValid:!0},{remainingScore:128,dart:{dart:["T18","T14","D16"]},isValid:!0},{remainingScore:127,dart:{dart:["T20","T17","D8"]},isValid:!0},{remainingScore:126,dart:{dart:["T19","T19","D6"]},isValid:!0},{remainingScore:125,dart:{dart:["25","T20","D20"]},isValid:!0},{remainingScore:124,dart:{dart:["T20","T16","D8"]},isValid:!0},{remainingScore:123,dart:{dart:["T19","T16","D9"]},isValid:!0},{remainingScore:122,dart:{dart:["T18","T20","D4"]},isValid:!0},{remainingScore:121,dart:{dart:["T17","T10","D20"]},isValid:!0},{remainingScore:120,dart:{dart:["T20","20","D20"]},isValid:!0},{remainingScore:119,dart:{dart:["T19","T10","D16"]},isValid:!0},{remainingScore:118,dart:{dart:["T20","18","D20"]},isValid:!0},{remainingScore:117,dart:{dart:["T20","17","D20"]},isValid:!0},{remainingScore:116,dart:{dart:["T20","16","D20"]},isValid:!0},{remainingScore:115,dart:{dart:["T20","15","D20"]},isValid:!0},{remainingScore:114,dart:{dart:["T20","14","D20"]},isValid:!0},{remainingScore:113,dart:{dart:["T20","13","D20"]},isValid:!0},{remainingScore:112,dart:{dart:["T20","12","D20"]},isValid:!0},{remainingScore:111,dart:{dart:["T20","19","D16"]},isValid:!0},{remainingScore:110,dart:{dart:["T20","18","D16"]},isValid:!0},{remainingScore:109,dart:{dart:["T19","20","D16"]},isValid:!0},{remainingScore:108,dart:{dart:["T20","16","D16"]},isValid:!0},{remainingScore:107,dart:{dart:["T19","18","D16"]},isValid:!0},{remainingScore:106,dart:{dart:["T20","14","D16"]},isValid:!0},{remainingScore:105,dart:{dart:["T19","16","D16"]},isValid:!0},{remainingScore:104,dart:{dart:["T18","18","D16"]},isValid:!0},{remainingScore:103,dart:{dart:["T20","3","D20"]},isValid:!0},{remainingScore:102,dart:{dart:["T20","10","D16"]},isValid:!0},{remainingScore:101,dart:{dart:["T20","1","D20"]},isValid:!0},{remainingScore:100,dart:{dart:["T20","D20"]},isValid:!0},{remainingScore:99,dart:{dart:["T19","10","D16"]},isValid:!0},{remainingScore:98,dart:{dart:["T20","D19"]},isValid:!0},{remainingScore:97,dart:{dart:["T19","D20"]},isValid:!0},{remainingScore:96,dart:{dart:["T20","D18"]},isValid:!0},{remainingScore:95,dart:{dart:["T19","D19"]},isValid:!0},{remainingScore:94,dart:{dart:["T18","D20"]},isValid:!0},{remainingScore:93,dart:{dart:["T19","D18"]},isValid:!0},{remainingScore:92,dart:{dart:["T20","D16"]},isValid:!0},{remainingScore:91,dart:{dart:["T17","D20"]},isValid:!0},{remainingScore:90,dart:{dart:["T20","D15"]},isValid:!0},{remainingScore:89,dart:{dart:["T19","D16"]},isValid:!0},{remainingScore:88,dart:{dart:["T16","D20"]},isValid:!0},{remainingScore:87,dart:{dart:["T17","D18"]},isValid:!0},{remainingScore:86,dart:{dart:["T18","D16"]},isValid:!0},{remainingScore:85,dart:{dart:["T15","D20"]},isValid:!0},{remainingScore:84,dart:{dart:["T20","D12"]},isValid:!0},{remainingScore:83,dart:{dart:["T17","D16"]},isValid:!0},{remainingScore:82,dart:{dart:["T14","D20"]},isValid:!0},{remainingScore:81,dart:{dart:["T19","D12"]},isValid:!0},{remainingScore:80,dart:{dart:["T20","D10"]},isValid:!0},{remainingScore:79,dart:{dart:["T19","D11"]},isValid:!0},{remainingScore:78,dart:{dart:["T18","D12"]},isValid:!0},{remainingScore:77,dart:{dart:["T19","D10"]},isValid:!0},{remainingScore:76,dart:{dart:["T20","D8"]},isValid:!0},{remainingScore:75,dart:{dart:["T17","D12"]},isValid:!0},{remainingScore:74,dart:{dart:["T14","D16"]},isValid:!0},{remainingScore:73,dart:{dart:["T19","D8"]},isValid:!0},{remainingScore:72,dart:{dart:["T16","D12"]},isValid:!0},{remainingScore:71,dart:{dart:["T13","D16"]},isValid:!0},{remainingScore:70,dart:{dart:["T10","D20"]},isValid:!0},{remainingScore:69,dart:{dart:["T15","D12"]},isValid:!0},{remainingScore:68,dart:{dart:["T20","D4"]},isValid:!0},{remainingScore:67,dart:{dart:["T17","D8"]},isValid:!0},{remainingScore:66,dart:{dart:["T10","D18"]},isValid:!0},{remainingScore:65,dart:{dart:["T19","D4"]},isValid:!0},{remainingScore:64,dart:{dart:["T16","D8"]},isValid:!0},{remainingScore:63,dart:{dart:["T13","D12"]},isValid:!0},{remainingScore:62,dart:{dart:["T10","D16"]},isValid:!0},{remainingScore:61,dart:{dart:["T15","D8"]},isValid:!0},{remainingScore:60,dart:{dart:["20","D20"]},isValid:!0},{remainingScore:59,dart:{dart:["19","D20"]},isValid:!0},{remainingScore:58,dart:{dart:["18","D20"]},isValid:!0},{remainingScore:57,dart:{dart:["17","D20"]},isValid:!0},{remainingScore:56,dart:{dart:["16","D20"]},isValid:!0},{remainingScore:55,dart:{dart:["15","D20"]},isValid:!0},{remainingScore:54,dart:{dart:["14","D20"]},isValid:!0},{remainingScore:53,dart:{dart:["13","D20"]},isValid:!0},{remainingScore:52,dart:{dart:["20","D16"]},isValid:!0},{remainingScore:51,dart:{dart:["19","D16"]},isValid:!0},{remainingScore:50,dart:{dart:["18","D16"]},isValid:!0},{remainingScore:50,dart:{dart:["Bull"]},isValid:!0},{remainingScore:49,dart:{dart:["17","D16"]},isValid:!0},{remainingScore:48,dart:{dart:["16","D16"]},isValid:!0},{remainingScore:47,dart:{dart:["15","D16"]},isValid:!0},{remainingScore:46,dart:{dart:["14","D16"]},isValid:!0},{remainingScore:45,dart:{dart:["13","D16"]},isValid:!0},{remainingScore:44,dart:{dart:["12","D16"]},isValid:!0},{remainingScore:43,dart:{dart:["11","D16"]},isValid:!0},{remainingScore:42,dart:{dart:["10","D16"]},isValid:!0},{remainingScore:41,dart:{dart:["9","D16"]},isValid:!0},{remainingScore:40,dart:{dart:["D20"]},isValid:!0},{remainingScore:39,dart:{dart:["S7","D16"]},isValid:!0},{remainingScore:38,dart:{dart:["D19"]},isValid:!0},{remainingScore:37,dart:{dart:["S5","D16"]},isValid:!0},{remainingScore:36,dart:{dart:["D18"]},isValid:!0},{remainingScore:35,dart:{dart:["S3","D16"]},isValid:!0},{remainingScore:34,dart:{dart:["D17"]},isValid:!0},{remainingScore:33,dart:{dart:["S1","D16"]},isValid:!0},{remainingScore:32,dart:{dart:["D16"]},isValid:!0},{remainingScore:31,dart:{dart:["S15","D8"]},isValid:!0},{remainingScore:30,dart:{dart:["D15"]},isValid:!0},{remainingScore:29,dart:{dart:["S13","D8"]},isValid:!0},{remainingScore:28,dart:{dart:["D14"]},isValid:!0},{remainingScore:27,dart:{dart:["S11","D8"]},isValid:!0},{remainingScore:26,dart:{dart:["D13"]},isValid:!0},{remainingScore:25,dart:{dart:["S9","D8"]},isValid:!0},{remainingScore:24,dart:{dart:["D12"]},isValid:!0},{remainingScore:23,dart:{dart:["S7","D8"]},isValid:!0},{remainingScore:22,dart:{dart:["D11"]},isValid:!0},{remainingScore:21,dart:{dart:["S5","D8"]},isValid:!0},{remainingScore:20,dart:{dart:["D10"]},isValid:!0},{remainingScore:19,dart:{dart:["S3","D8"]},isValid:!0},{remainingScore:18,dart:{dart:["D9"]},isValid:!0},{remainingScore:17,dart:{dart:["S1","D8"]},isValid:!0},{remainingScore:16,dart:{dart:["D8"]},isValid:!0},{remainingScore:15,dart:{dart:["S7","D4"]},isValid:!0},{remainingScore:14,dart:{dart:["D7"]},isValid:!0},{remainingScore:13,dart:{dart:["S5","D4"]},isValid:!0},{remainingScore:12,dart:{dart:["D6"]},isValid:!0},{remainingScore:11,dart:{dart:["S3","D4"]},isValid:!0},{remainingScore:10,dart:{dart:["D5"]},isValid:!0},{remainingScore:9,dart:{dart:["S1","D4"]},isValid:!0},{remainingScore:8,dart:{dart:["D4"]},isValid:!0},{remainingScore:7,dart:{dart:["S3","D2"]},isValid:!0},{remainingScore:6,dart:{dart:["D3"]},isValid:!0},{remainingScore:5,dart:{dart:["S1","D2"]},isValid:!0},{remainingScore:4,dart:{dart:["D2"]},isValid:!0},{remainingScore:3,dart:{dart:["S1","D1"]},isValid:!0},{remainingScore:2,dart:{dart:["D1"]},isValid:!0}],{match:e,setMatch:i,isRunning:n,setIsRunning:l}=r,o=async r=>{if(!e||void 0===e.currentLegIndex)return;let a=Number(r),i=u(e.currentTeamIndex);if(/^(0|[1-9][0-9]{0,2})$/.test(r)||""===r){if(a<0||a>180)throw Error("Please input a score between 0 and 180");else if(179===a)throw Error("You can't score 179");else if(void 0===i)return;else if(a>i)throw Error("You can't score more than remaining points")}else throw Error("Please provide a valid score");let t=e.teams[e.currentTeamIndex];if(m())return void c();if(S(a)){if(t.wins++,I(await h()),m()){D({...e}),c();return}V()}else T(a),s()},s=()=>{if(!e)return;let r=e.teams.map((r,a)=>a===e.currentTeamIndex?{...r,currentPlayerIndex:(r.currentPlayerIndex+1)%r.players.length}:r);D({...e,teams:r,currentTeamIndex:(e.currentTeamIndex+1)%e.teams.length})},c=()=>{if(!e)return;l(!1);let r=g(),a={...e,isOver:!0,winnerTeamIndex:null==r?void 0:r.teamId};i(a),localStorage.setItem("match",JSON.stringify(a))},g=()=>{switch(null==e?void 0:e.matchSettings.mode){case"First to":return e.teams.find(r=>r.wins==e.matchSettings.legs);case"Best of":return e.teams.reduce((r,a)=>a.wins>r.wins?a:r);default:return}},m=()=>{if(!e)return!1;switch(e.matchSettings.mode){case"First to":return e.teams.some(r=>r.wins>=e.matchSettings.legs);case"Best of":let r=e.matchSettings.legs,a=e.teams.reduce((r,a)=>r+a.wins,0);if(a>=r)return!0;return Math.max(...e.teams.map(r=>r.wins))>(e.teams.map(r=>r.wins).sort((r,a)=>a-r)[1]||0)+(r-a);default:return!1}},S=r=>!!e&&u(e.currentTeamIndex)-r==0,T=r=>{if(!e||void 0===e.currentLegIndex)return;let a=e.legs[e.currentLegIndex],i=e.teams[e.currentTeamIndex],t=a.legScoreHistory.filter(r=>r.teamId===i.teamId).at(-1),d=t?t.remainingScore:e.matchSettings.startingScore;a.legScoreHistory.push({throwId:a.legScoreHistory.length+1,playerId:i.players[i.currentPlayerIndex],teamId:i.teamId,legId:a.legId,score:r,remainingScore:d-r})},V=()=>{if(!e||void 0===e.currentLegIndex)return;let r=e.currentLegIndex+1;if(r>=e.legs.length)return;let a=e.legs.map((r,a)=>a===e.currentLegIndex?{...r,isFinished:!0}:r),t={...e,legs:a,currentLegIndex:r,currentTeamIndex:e.matchSettings.randomStartingTeam?Math.floor(Math.random()*e.teams.length):(e.currentTeamIndex+1)%e.teams.length,teams:e.teams.map(r=>({...r,currentPlayerIndex:e.matchSettings.randomStartingPlayer?Math.floor(Math.random()*r.players.length):0}))};i(t),D(t)},u=r=>{if(!e||void 0===e.currentLegIndex)throw Error("Match or current leg is undefined.");let{matchSettings:a,legs:i,currentLegIndex:t}=e,d=i[t].legScoreHistory.filter(a=>a.teamId===r).reduce((r,a)=>r+Number(a.score),0);return a.startingScore-d},D=r=>{i({...r}),console.log("Match saved:",r),localStorage.setItem("match",JSON.stringify(r))},h=async()=>{let r=Number(prompt("H\xe1ny dob\xe1sb\xf3l lett meg a leg?"));return isNaN(r)?0:r},I=r=>{if(!e)return;let a=e.legs.map((a,i)=>i===e.currentLegIndex?{...a,thrownDartsToCheckOut:r}:a);D({...e,legs:a})};return{match:e,setMatch:i,isRunning:n,setIsRunning:l,CurrentTeamIndex:null==e?void 0:e.currentTeamIndex,NextRound:o,SetCurrentTeamIndex:r=>{e&&D({...e,currentTeamIndex:r})},SetCurrentPlayerIndex:(r,a)=>{if(!e)return;let i=e.teams.map((e,i)=>i==r?{...e,currentPlayerIndex:a}:e);D({...e,teams:i})},CalculateMatchAvg:r=>{if(!e||void 0===e.currentLegIndex)return;let a=0,i=0;return e.legs.map(e=>{e.legScoreHistory.map(e=>{e.teamId==r&&(i++,a+=Number(e.score))})}),Math.round(a/i)},CalculateLegAvg:r=>{if(!e||void 0===e.currentLegIndex)return;let a=0,i=0;return e.legs[e.currentLegIndex].legScoreHistory.forEach(e=>{e.teamId==r&&(i++,a+=Number(e.score))}),Math.round(a/i)},CreateMatch:(r,a,e,t,d,n,o)=>{let s=r.map((r,a)=>({...r,teamId:a,wins:0,currentPlayerIndex:n?Math.floor(Math.random()*r.players.length):0})),c="First to"===e?(a-1)*r.length+1:a,g={teams:s,legs:Array.from({length:c},(r,a)=>({legId:a,winnerTeamId:null,legScoreHistory:[],isFinished:!1,thrownDartsToCheckOut:null})),currentTeamIndex:d?Math.floor(Math.random()*s.length):0,currentLegIndex:0,isOver:!1,matchSettings:{mode:e,startingScore:t,legs:a,maxLeg:c,checkOutMode:o,randomStartingTeam:d,randomStartingPlayer:n},winnerTeamIndex:void 0};i(g),D(g),console.log("Match created:",g),l(!0)},RemoveScore:()=>{if(!e||void 0===e.currentLegIndex||0==e.legs[e.currentLegIndex].legScoreHistory.length)throw Error("Empty");let r=(e.currentTeamIndex-1+e.teams.length)%e.teams.length,a=[...e.legs];a[e.currentLegIndex].legScoreHistory.pop();let i=e.teams.map((a,e)=>e===r?{...a,currentPlayerIndex:(a.currentPlayerIndex-1+a.players.length)%a.players.length}:a);D({...e,legs:a,teams:i,currentTeamIndex:r})},GetScoreHistory:(r,a)=>{if(!e||void 0===e.currentLegIndex)return;let i=e.currentLegIndex;switch(a){case"Leg":var t;return null==(t=e.legs[i])?void 0:t.legScoreHistory.filter(a=>a.teamId==r);case"Match":return e.legs.flatMap(r=>r.legScoreHistory).filter(a=>a.teamId==r)}},GetCheckOuts:r=>{var e;return null==(e=a.find(a=>a.remainingScore===r))?void 0:e.dart},GetRemainingScore:u,BiggestLegScorePlayer:()=>{if(e&&void 0!==e.currentLegIndex&&0!=e.legs[e.currentLegIndex].legScoreHistory.length)return null==e?void 0:e.legs[e.currentLegIndex].legScoreHistory.reduce((r,a)=>a.score>r.score?a:r)},BiggestMatchScorePlayer:()=>{if(!e)return null;let r=null;for(let a of e.legs)for(let e of a.legScoreHistory)(!r||e.score>r.score)&&(r=e);return r},GetThrownDartsToCheckOut:h,GetPlayerScores:(r,a)=>{if(e&&void 0!==e.currentLegIndex&&null!==a)return e.legs[e.currentLegIndex].legScoreHistory.filter(e=>e.teamId==r&&e.playerId.playerId==a)},GetWinner:g,GetCheckOuts2:r=>{let a=[];a.push({label:"D25",value:50,type:"Double"}),a.push({label:"25",value:25,type:"Simple"});for(let r=20;r>=1;r--)a.push({label:"T".concat(r),value:3*r,type:"Triple"}),a.push({label:"D".concat(r),value:2*r,type:"Double"}),a.push({label:"".concat(r),value:r,type:"Simple"});console.log(a);let i=new Set;a.forEach(a=>{a.type==(null==e?void 0:e.matchSettings.checkOutMode)&&a.value==r&&i.add([a])}),a.forEach(t=>a.forEach(a=>{a.type==(null==e?void 0:e.matchSettings.checkOutMode)&&t.value+a.value==r&&i.add([t,a])})),a.forEach(t=>a.forEach(d=>a.forEach(a=>{a.type==(null==e?void 0:e.matchSettings.checkOutMode)&&t.value+d.value+a.value==r&&i.add([t,d,a])})));let t=new Set;return i.forEach(r=>{let a=r.map(r=>"D25"===r.label?{...r,label:"Bull"}:r);t.add(a)}),t},CalculateMatchMileStones:(r,a)=>{if(!e||void 0===e.currentLegIndex)return 0;switch(a){case 180:return e.legs.flatMap(e=>e.legScoreHistory.filter(e=>e.teamId===r&&e.score===a)).length;case 120:return e.legs.flatMap(e=>e.legScoreHistory.filter(e=>e.teamId===r&&e.score>=a&&e.score<180)).length;case 60:return e.legs.flatMap(e=>e.legScoreHistory.filter(e=>e.teamId===r&&e.score>=a&&e.score<110)).length;default:return 0}}}}}}]);